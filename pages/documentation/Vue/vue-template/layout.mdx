## 3.首页布局

### 3.1 创建 layout 布局组件

src 下创建 layout/index.vue

```vue
<template>
  <div class="app-wrapper">
    <div class="sidebar-container">sidebar</div>
    <div class="main-container">
      <div class="header">
        <div class="navbar">navbar</div>
        <div class="tags-view">tagsview</div>
      </div>
      <div class="app-main">
        <h2>app main</h2>
        <router-view></router-view>
      </div>
    </div>
  </div>
</template>
```

### 3.2 创建 Dashboard 页面

src/views/dashboard/index.vue

```vue
<template>
  <div>
    <h1>Dashboard page</h1>
  </div>
</template>
```

### 3.3 配置路由

src/router/index.ts

```ts
import { RouteRecordRaw, createRouter, createWebHistory } from "vue-router";
import Layout from "@/layout/index.vue";

const routes: Array<RouteRecordRaw> = [
  {
    path: "/",
    component: Layout,
    redirect: "/dashboard",
    children: [
      {
        path: "dashboard",
        name: "Dashboard",
        component: () =>
          import(
            /* WebpackChunkName: dashboard */ "@/views/dashboard/index.vue"
          ),
        meta: {
          title: "Dashboard",
        },
      },
    ],
  },
];

export default createRouter({
  history: createWebHistory(),
  routes,
});
```

> 在 router 目录下 typings.d.ts 针对 RouteMeta 进行类型补充

src/router/typings.d.ts

```ts
import "vue-router";
declare module "vue-router" {
  interface RouteMeta {
    title?: string; // 路由菜单title
    icon?: string; // 路由菜单icon
    hidden?: boolean; // 菜单栏不显示
    // 路由是否缓存 没有这个属性或false都会缓存 true不缓存
    noCache?: boolean;
    activeMenu?: string; // 指定菜单激活
    breadcrumb?: boolean; // 该路由是否显示面包屑
    affix?: boolean; // 固定显示在tagsView中
    alwaysShow?: boolean; // 菜单是否一直显示根路由
  }
}
```

### 3.3 styles 样式文件

**安装 sass**

```bash
pnpm install sass -D
```

src\styles\variables.module.scss

```scss
// base color
$blue: #324157;
$light-blue: #3a71a8;
$red: #c03639;
$pink: #e65d6e;
$green: #30b08f;
$tiffany: #4ab7bd;
$yellow: #fec171;
$panGreen: #30b08f;

// sidebar
$menuText: #bfcbd9;
$menuActiveText: #409eff;
$subMenuActiveText: #f4f4f5;
$menuBg: #304156;
$menuHover: #263445;
$subMenuBg: #1f2d3d;
$subMenuHover: #001528;
$sideBarWidth: 210px;
// 导出变量提供给js来使用
:export {
  menuText: $menuText;
  menuActiveText: $menuActiveText;
  subMenuActiveText: $subMenuActiveText;
  menuBg: $menuBg;
  menuHover: $menuHover;
  subMenuBg: $subMenuBg;
  subMenuHover: $subMenuHover;
  sideBarWidth: $sideBarWidth;
}
```

src\styles\sidebar.scss

```scss
#app {
  .sidebar-container {
    width: $sideBarWidth !important;
    height: 100%;
    background-color: $yellow;
  }
}
```

src\styles\index.scss

```scss
@import "./variables.module.scss";
@import "./sidebar.scss";
html {
  height: 100%;
  box-sizing: border-box;
}

body {
  height: 100%;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  font-family: Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft
      YaHei, Arial, sans-serif;
}
#app {
  height: 100%;
}
```

**样式重置**

安装

```bash
pnpm install normalize.css
```

**main.ts 中引入**

```ts
import { createApp } from "vue";
import App from "./App.vue";
import router from "./router/index";
import { createPinia } from "pinia";
import ElementPlus from "element-plus";
import "element-plus/dist/index.css";
// 初始化css，重置css默认样式
import "normalize.css/normalize.css";
// 全局css
import "@/styles/index.scss";
const app = createApp(App);
app.use(createPinia());
app.use(router);
app.use(ElementPlus);
app.mount("#app");
```

### 3.4 完善 layout 样式

```vue
<style lang="scss" scoped>
.app-wrapper {
  display: flex;
  width: 100%;
  height: 100%;
  .main-container {
    flex: 1;
    display: flex;

    flex-direction: column;
    .header {
      background: cyan;
      .navbar {
        height: 50px;
        background: #1890ff;
      }
      .tags-view {
        height: 34px;
        background: #12efff;
      }
    }
    .app-main {
      /* main = 100% - navbar + tagsview */
      min-height: calc(100vh - 84px);
      background: red;
    }
  }
}
</style>
```